(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"3/aw":function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var r=n(a("2/Rp"));a("y8nQ");var d=n(a("Vl3Y"));a("5NDa");var u=n(a("5rEg"));a("R9oj");var c=n(a("ECub"));a("cWXX");var o=n(a("/ezw"));a("IzEo");var i=n(a("bx4M"));a("14J3");var f=n(a("BMrR"));a("Pwec");var m=n(a("CtXQ"));a("jCWc");var s=n(a("kPKH"));a("Telt");var p=n(a("Tckk"));a("2qtc");var E=n(a("kLXV")),g=n(a("2Taf")),v=n(a("vZ4D")),h=n(a("l4Ni")),y=n(a("ujKo")),w=n(a("rlhR")),b=n(a("MhPg")),C=l(a("q1tI")),k=a("Hx5s"),x=a("RBnf"),I=a("Hg0r"),D=a("+n12"),P=n(a("yEr3"));a("bXlo");var V=n(a("fNnt")),L=function(e){function t(e){var a;return(0,g.default)(this,t),a=(0,h.default)(this,(0,y.default)(t).call(this)),a.parseParam=function(e){var t={};if(""!=e){var a=e.slice(e.indexOf("?")+1),l=a.split("&");l.map(function(e){t[e.split("=")[0]]=e.split("=")[1]})}return t},a.handleClick=function(e){a.setState({current:e.key})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.form,n=t.dispatch;l.validateFields({force:!0},function(e,t){e||n({type:"articleView/addComment",payload:{content:t.comment,postId:(0,D.parseLocationSearch)(location.search).postId}})})},a.onDeleteComment=function(e){var t=(0,w.default)(a);return function(){E.default.confirm({title:"\u5220\u9664\u6587\u7ae0",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8bc4\u8bba\uff1f",onOk:function(){t.props.dispatch({type:"articleView/deleteComment",payload:{commentId:e._id,postId:e.postId}})}})}},a.getCommentCard=function(e){return C.default.createElement(i.default,{style:{marginBottom:20,height:120}},C.default.createElement(f.default,null,C.default.createElement(s.default,{span:1},C.default.createElement(p.default,{src:"/api/user/avatar/get?imgid=".concat(e.author.avatar),icon:"user"})),C.default.createElement(s.default,{span:23},C.default.createElement("p",null,e.author.nickname,":"),C.default.createElement("p",{style:{marginLeft:20}},e.content),C.default.createElement("p",{style:{float:"right",color:"#d9d9d9"}},e.created_at," ",C.default.createElement("a",{onClick:a.onDeleteComment(e)},C.default.createElement(m.default,{type:"delete",style:{color:"rgba(232,17,35,0.3)"}}))))))},a.onEdit=function(e){return function(){location.href="#/article/edit?postId=".concat(e)}},a.onRemove=function(e){var t=(0,w.default)(a);return function(){E.default.confirm({title:"\u5220\u9664\u6587\u7ae0",content:"\u786e\u5b9a\u5220\u9664\u6587\u7ae0\uff1f",onOk:function(){t.props.dispatch({type:"articleView/deletePost",payload:{postId:e}})}})}},a.state={current:"0",loading:!1,imageUrl:"/api/user/avatar/get?imgid=".concat(e.currentUser.avatar)||!1},a}return(0,b.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"articleView/getPost",payload:(0,D.parseLocationSearch)(location.hash)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,l=t.articleView,n=t.getPostLoading,m=a.getFieldDecorator,p=l.post,E=l.comments,g=p&&p.title;return C.default.createElement(k.GridContent,null,n?C.default.createElement(f.default,{gutter:[24,24],type:"flex",justify:"center"},C.default.createElement(s.default,{lg:18,md:24},C.default.createElement(i.default,{bordered:!1},C.default.createElement(f.default,{gutter:24},C.default.createElement(s.default,{lg:24,md:24},C.default.createElement(o.default,{active:!0,paragraph:{rows:4}})))))):null==p?C.default.createElement(f.default,{gutter:[24,24],type:"flex",justify:"center"},C.default.createElement(s.default,{lg:18,md:24},C.default.createElement(i.default,{bordered:!1},C.default.createElement(f.default,{gutter:24},C.default.createElement(s.default,{lg:24,md:24},C.default.createElement(c.default,{description:!1})))))):C.default.createElement(C.default.Fragment,null,C.default.createElement(f.default,{gutter:[24,24],type:"flex",justify:"center"},C.default.createElement(s.default,{lg:18,md:24},C.default.createElement(i.default,{title:g,bordered:!1},C.default.createElement(f.default,{gutter:24},C.default.createElement(s.default,{lg:24,md:24},C.default.createElement("div",{className:"braft-output-content",dangerouslySetInnerHTML:{__html:P.default.createEditorState(p.content).toHTML()}}),C.default.createElement(x.EditOutlined,{className:V.default.iconEdit,onClick:this.onEdit(p._id)}),C.default.createElement(x.DeleteOutlined,{className:V.default.iconDelete,onClick:this.onRemove(p._id)})))))),C.default.createElement(f.default,{gutter:[24,24],type:"flex",justify:"center"},C.default.createElement(s.default,{lg:18,md:24},C.default.createElement(i.default,{bordered:!1},C.default.createElement(f.default,{gutter:24},C.default.createElement(s.default,{lg:24,md:24},C.default.createElement("h4",null,"\u8bc4\u8bba\u533a"),C.default.createElement(d.default,{onSubmit:this.handleSubmit},C.default.createElement(d.default.Item,{style:{marginBottom:"0"}},m("comment")(C.default.createElement(u.default.TextArea,{rows:3,size:"middle",placeholder:"\u5206\u4eab\u4f60\u7684\u89c1\u89e3..."}))),C.default.createElement(d.default.Item,null,C.default.createElement(r.default,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))),E.map(function(t){return e.getCommentCard(t)}))))))))}}]),t}(C.Component),j=(0,I.connect)(function(e){var t=e.articleView,a=e.user,l=e.loading;return{currentUser:a.currentUser,articleView:t,getPostLoading:l.effects["articleView/getPost"]}})(d.default.create()(L));t.default=j},fNnt:function(e,t,a){e.exports={icon:"antd-pro-pages-article-view-index-icon",iconDelete:"antd-pro-pages-article-view-index-iconDelete",iconEdit:"antd-pro-pages-article-view-index-iconEdit"}}}]);