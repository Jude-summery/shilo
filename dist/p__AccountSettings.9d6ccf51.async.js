(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{g8fB:function(e,t,a){"use strict";var l=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var n=r(a("BMrR"));a("IzEo");var u=r(a("bx4M"));a("+L6B");var i=r(a("2/Rp"));a("y8nQ");var d=r(a("Vl3Y"));a("5NDa");var c=r(a("5rEg"));a("DZo9");var f=r(a("8z0m"));a("jCWc");var s=r(a("kPKH"));a("lUTK");var o=r(a("BvKs"));a("Pwec");var m=r(a("CtXQ"));a("miYZ");var g=r(a("tsqr")),p=r(a("2Taf")),v=r(a("vZ4D")),h=r(a("l4Ni")),E=r(a("ujKo")),b=r(a("MhPg")),y=l(a("q1tI")),U=a("Hx5s"),F=a("Hg0r"),k=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,h.default)(this,(0,E.default)(t).call(this)),a.getBase64=function(e,t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)}),a.readAsDataURL(e)},a.beforeUpload=function(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||g.default.error("You can only upload JPG/PNG file!");var a=e.size/1024/1024<2;return a||g.default.error("Image must smaller than 2MB!"),t&&a},a.handleClick=function(e){a.setState({current:e.key})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,l=t.form,r=t.dispatch;l.validateFields({force:!0},function(e,t){e||r({type:"accountSettings/submit",payload:t})})},a.handleChange=function(e){"uploading"!==e.file.status?"done"===e.file.status&&a.getBase64(e.file.originFileObj,function(e){return a.setState({imageUrl:e,loading:!1})}):a.setState({loading:!0})},a.state={current:"0",loading:!1,imageUrl:"/api/user/avatar/get?imgid=".concat(e.currentUser.avatar)||!1},a}return(0,b.default)(t,e),(0,v.default)(t,[{key:"render",value:function(){var e=this.state.imageUrl,t=this.props,a=t.form,l=t.submitting,r=(t.currentUser,a.getFieldDecorator),g=["\u57fa\u672c\u4fe1\u606f"][this.state.current],p=y.default.createElement("div",null,y.default.createElement(m.default,{type:this.state.loading?"loading":"plus"}),y.default.createElement("div",{className:"ant-upload-text"},"\u4e0a\u4f20\u5934\u50cf"));return y.default.createElement(U.GridContent,null,y.default.createElement(n.default,{gutter:24},y.default.createElement(s.default,{lg:7},y.default.createElement(o.default,{onClick:this.handleClick,selectedKeys:[this.state.current]},y.default.createElement(o.default.Item,{key:"0"},"\u57fa\u672c\u4fe1\u606f"))),y.default.createElement(s.default,{lg:17,md:24},y.default.createElement(u.default,{title:g,bordered:!1},y.default.createElement(f.default,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/user/avatar/update",beforeUpload:this.beforeUpload,onChange:this.handleChange},e?y.default.createElement("img",{src:e,alt:"avatar",style:{width:"100%"}}):p),y.default.createElement(d.default,{onSubmit:this.handleSubmit},y.default.createElement(d.default.Item,{label:"\u90ae\u7bb1"},r("email")(y.default.createElement(c.default,{size:"large"}))),y.default.createElement(d.default.Item,{label:"\u6635\u79f0"},r("nickname")(y.default.createElement(c.default,{size:"large"}))),y.default.createElement(d.default.Item,{label:"\u4e2a\u6027\u7b7e\u540d"},r("signature")(y.default.createElement(c.default,null))),y.default.createElement(d.default.Item,{label:"\u804c\u4e1a"},r("title")(y.default.createElement(c.default,null))),y.default.createElement(d.default.Item,null,y.default.createElement(i.default,{size:"large",loading:l,type:"primary",htmlType:"submit"},"\u63d0\u4ea4")))))))}}]),t}(y.Component),w=(0,F.connect)(function(e){var t=e.accountSettings,a=e.user,l=e.loading;return{currentUser:a.currentUser,accountSettings:t,submitting:l.effects["accountSettings/submit"]}})(d.default.create({mapPropsToFields:function(e){return{email:d.default.createFormField({value:e.currentUser.email}),nickname:d.default.createFormField({value:e.currentUser.nickname}),signature:d.default.createFormField({value:e.currentUser.signature}),title:d.default.createFormField({value:e.currentUser.title})}}})(k));t.default=w}}]);